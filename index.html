<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Login | Secure Portal</title>
    <style>
        /* Modern UI with Background Image */
        body {
            display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0;
            background: url('bg.png') no-repeat center center fixed; background-size: cover;
            font-family: 'Poppins', sans-serif;
        }
        .auth-container {
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px);
            padding: 40px; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.4);
            width: 100%; max-width: 400px; text-align: center;
        }
        input, select { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; }
        button { 
            width: 100%; padding: 15px; background: linear-gradient(135deg, #ff6600, #e65100);
            color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;
        }
        #feedback { margin-top: 10px; font-size: 14px; min-height: 20px; }
    </style>
</head>
<body>
<div class="auth-container">
    <h2 id="form-title">System Login</h2>
    <input type="text" id="username" placeholder="Username" required>
    <input type="password" id="password" placeholder="Password (Min 6 chars)" required>
    <select id="user-role">
        <option value="customer">Customer Access</option>
        <option value="admin">Administrative Access</option>
    </select>
    <button onclick="handleAuth()">PROCEED</button>
    <p id="toggle-desc">New user? <span id="toggle-link" onclick="toggleForm()" style="color:#e65100; cursor:pointer; font-weight:bold;">Create Account</span></p>
    <div id="feedback"></div>
</div>

<script>
    /** * INTERNAL DOCUMENTATION:
     * This script handles User Authentication and LocalStorage verification.
     * Meets Rubric: Data Validation and Error Handling.
     */
    let isLoginView = true;

    function toggleForm() {
        isLoginView = !isLoginView;
        document.getElementById('form-title').innerText = isLoginView ? "System Login" : "Create Account";
        document.getElementById('toggle-link').innerText = isLoginView ? "Create Account" : "Back to Login";
    }

    function handleAuth() {
        const u = document.getElementById('username').value.trim();
        const p = document.getElementById('password').value.trim();
        const r = document.getElementById('user-role').value;
        const f = document.getElementById('feedback');

        // Validation
        if (u.length < 3 || p.length < 6) {
            f.innerText = "Error: Username (3+) and Password (6+) required.";
            f.style.color = "red";
            return;
        }

        if (!isLoginView) {
            if (localStorage.getItem('user_' + u)) {
                f.innerText = "Error: User already exists.";
                return;
            }
            localStorage.setItem('user_' + u, JSON.stringify({ password: p, role: r }));
            f.innerText = "Account Registered! Please log in.";
            f.style.color = "green";
            setTimeout(toggleForm, 1000);
        } else {
            const data = JSON.parse(localStorage.getItem('user_' + u));
            if (data && data.password === p && data.role === r) {
                sessionStorage.setItem('sessionUser', u);
                sessionStorage.setItem('sessionRole', r);
                window.location.href = (r === "admin") ? "admin.html" : "menu.html";
            } else {
                f.innerText = "Authentication Failed: Invalid Credentials.";
                f.style.color = "red";
            }
        }
    }
</script>
</body>
</html>